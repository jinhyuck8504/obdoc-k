# Implementation Plan

- [ ] 1. 병원 코드 시스템 기본 구조 및 타입 정의 생성
  - 병원 코드 생성, 검증, 관리를 위한 TypeScript 인터페이스 정의
  - 가입 코드 시스템을 위한 데이터 모델 및 타입 생성
  - 보안 관련 유틸리티 함수 및 암호화 로직 구현
  - _Requirements: 2.1, 6.2, 6.3_

- [ ] 2. 가입 코드 검증 시스템 구현
  - 고객 가입 시 사용할 가입 코드 검증 로직 구현
  - 코드 형식 검증, 만료 시간 확인, 사용 횟수 제한 기능
  - 암호화된 코드 저장 및 해시 비교 검증 시스템
  - _Requirements: 1.1, 1.2, 1.5, 6.3_

- [ ] 3. 병원 코드 자동 생성 시스템 구현
  - 의사 가입 시 고유한 병원 코드 자동 생성 로직
  - 지역, 병원 유형, 순번을 포함한 체계적인 코드 생성 규칙
  - 중복 방지 및 코드 유효성 검증 기능
  - _Requirements: 2.1, 6.2_

- [ ] 4. InviteCodeValidator 컴포넌트 구현
  - 고객 가입 시 가입 코드 입력 및 실시간 검증 UI
  - 코드 검증 중 로딩 상태 및 에러 메시지 표시
  - 유효한 코드 입력 시 병원 정보 표시 기능
  - _Requirements: 1.1, 1.2, 1.5_

- [ ] 5. 업데이트된 CustomerSignupForm 컴포넌트 구현
  - 가입 코드 검증을 포함한 고객 가입 폼 재구성
  - 검증된 병원과 연결된 고객 등록 프로세스
  - 구독 플랜 정보 완전 숨김 및 보안 강화
  - _Requirements: 1.1, 1.3, 1.4_

- [ ] 6. HospitalCodeGenerator 컴포넌트 구현
  - 의사 가입 시 병원 정보 기반 코드 자동 생성
  - 생성된 코드의 고유성 검증 및 충돌 처리
  - 병원 코드 생성 과정의 시각적 피드백 제공
  - _Requirements: 2.1, 2.4_

- [ ] 7. 업데이트된 DoctorSignupFlow 컴포넌트 구현
  - 병원 코드 생성을 포함한 의사 가입 플로우 재구성
  - 1단계: 기본 정보 + 병원 정보 + 코드 생성
  - 2단계: 구독 플랜 선택 + 최종 확인
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [ ] 8. InviteCodeManager 컴포넌트 구현
  - 의사용 고객 가입 코드 생성 및 관리 대시보드
  - 코드 생성, 만료 시간 설정, 사용 횟수 제한 기능
  - 생성된 코드 목록 조회 및 비활성화 기능
  - QR 코드 생성 및 공유 기능 구현
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 3.5_

- [ ] 9. AdminHospitalManager 컴포넌트 구현
  - 시스템 관리자용 병원 및 가입 코드 통합 관리 대시보드
  - 전체 병원 목록, 코드 현황, 가입 통계 표시
  - 병원별 상세 정보 조회 및 관리 기능
  - 의심스러운 활동 감지 및 알림 시스템
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ] 10. 보안 강화된 API 엔드포인트 구현
  - 가입 코드 생성, 검증, 관리를 위한 REST API
  - 병원 코드 생성 및 조회 API
  - Rate limiting 및 보안 미들웨어 적용
  - 감사 로그 기록 및 모니터링 기능
  - _Requirements: 6.1, 6.3, 6.5_

- [ ] 11. 데이터베이스 스키마 및 보안 정책 구현
  - 병원 정보, 가입 코드, 사용 내역 테이블 생성
  - 암호화된 데이터 저장을 위한 필드 및 인덱스 설정
  - Row Level Security (RLS) 정책 적용
  - 데이터 백업 및 복구 전략 구현
  - _Requirements: 6.2, 6.3, 6.4_

- [ ] 12. 실시간 알림 및 모니터링 시스템 구현
  - 가입 코드 사용 시 의사에게 실시간 알림
  - 관리자용 의심스러운 활동 감지 알림
  - 시스템 상태 모니터링 및 성능 지표 수집
  - _Requirements: 3.5, 4.5, 7.4_

- [ ] 13. 메인 SignupForm 컴포넌트 통합 및 리팩토링
  - 기존 SignupForm을 새로운 보안 강화 플로우로 전환
  - 역할 선택에 따른 보안 요구사항 적용
  - 기존 기능과의 호환성 유지하면서 새 시스템 통합
  - _Requirements: 5.1, 5.2, 6.1_

- [ ] 14. 고급 에러 처리 및 사용자 피드백 시스템 구현
  - 가입 코드 관련 상세 에러 메시지 및 복구 가이드
  - 병원 코드 생성 실패 시 대안 제시 기능
  - 보안 위반 시 적절한 사용자 안내 및 차단 기능
  - _Requirements: 1.5, 5.4, 6.5_

- [ ] 15. 의료진용 고객 관리 대시보드 구현
  - 병원 소속 고객 목록 및 가입 경로 표시
  - 고객별 서비스 이용 현황 모니터링 (개인정보 보호 준수)
  - 부적절한 활동 감지 시 알림 및 조치 기능
  - _Requirements: 7.1, 7.2, 7.3, 7.4_

- [ ] 16. 성능 최적화 및 캐싱 시스템 구현
  - 가입 코드 검증 결과 캐싱으로 응답 속도 개선
  - 병원 정보 조회 최적화 및 인덱스 튜닝
  - 대용량 가입 요청 처리를 위한 큐 시스템 구현
  - _Requirements: 6.4_

- [ ] 17. 보안 테스트 및 취약점 검증 구현
  - 가입 코드 무차별 대입 공격 방어 테스트
  - 병원 코드 추측 공격 방어 테스트
  - SQL Injection, XSS 등 웹 취약점 테스트
  - 개인정보 암호화 및 접근 권한 테스트
  - _Requirements: 6.3, 6.5_

- [ ] 18. 단위 테스트 및 통합 테스트 작성
  - 가입 코드 생성, 검증, 만료 로직 테스트
  - 병원 코드 생성 및 중복 방지 테스트
  - 전체 가입 플로우 E2E 테스트 (고객/의사 각각)
  - 관리자 모니터링 기능 테스트
  - _Requirements: 1.1-1.5, 2.1-2.4, 3.1-3.5, 4.1-4.5_

- [ ] 19. 규정 준수 및 감사 로그 시스템 구현
  - 의료정보 보호 관련 법규 준수 기능
  - 모든 가입 및 코드 사용 내역 감사 로그 기록
  - 개인정보 처리 동의 및 철회 기능
  - 데이터 보존 및 삭제 정책 자동화
  - _Requirements: 6.3, 6.5_

- [ ] 20. 사용자 가이드 및 관리자 문서 작성
  - 의사용 가입 코드 생성 및 관리 가이드
  - 고객용 가입 과정 안내 문서
  - 관리자용 시스템 모니터링 및 관리 매뉴얼
  - 보안 정책 및 비상 대응 절차 문서화
  - _Requirements: 5.1, 5.3_
